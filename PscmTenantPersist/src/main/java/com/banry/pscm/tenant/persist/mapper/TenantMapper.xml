<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.banry.pscm.tenant.persist.dao.TenantMapper">
  <resultMap id="BaseResultMap" type="com.banry.pscm.tenant.service.biz.Tenant">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 13:50:15 CST 2018.
    -->
    <id column="tenant_code" jdbcType="VARCHAR" property="tenantCode" />
    <result column="account" jdbcType="VARCHAR" property="account" />
    <result column="password" jdbcType="VARCHAR" property="password" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="tenant_type" jdbcType="INTEGER" property="tenantType" />
    <result column="create_date" jdbcType="DATE" property="createDate" />
    <result column="start_date" jdbcType="DATE" property="startDate" />
    <result column="end_date" jdbcType="DATE" property="endDate" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="parent_code" jdbcType="VARCHAR" property="parentCode" />
    <!--crj2018-04-06 modify
    <result column="real_code" jdbcType="VARCHAR" property="realCode" />
    <result column="source_code" jdbcType="VARCHAR" property="sourceCode" />
    -->
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithRealSource" type="com.banry.pscm.tenant.service.biz.Tenant">
    <association property="tenantReal" resultMap="com.banry.pscm.tenant.persist.dao.TenantRealMapper.ResultMapWithBLOBs"></association>
    <association property="source" resultMap="com.banry.pscm.tenant.persist.dao.DynamicSourceMapper.BaseResultMap"></association> 
  </resultMap>
   <resultMap extends="BaseResultMap" id="ResultMapWithBizs" type="com.banry.pscm.tenant.service.biz.Tenant">
    <collection property="bizs"  resultMap="com.banry.pscm.tenant.persist.dao.PscmBusinessMapper.BaseResultMap"></collection>  
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithRealSourceAndBizs" type="com.banry.pscm.tenant.service.biz.Tenant">
    <association property="tenantReal" javaType="com.banry.pscm.tenant.service.biz.TenantRealWithBLOBs">
    	<id column="real_code" jdbcType="VARCHAR" property="realCode" />
    	<result column="real_name" jdbcType="VARCHAR" property="name" />
	    <result column="address" jdbcType="VARCHAR" property="address" />
	    <result column="post_code" jdbcType="VARCHAR" property="postCode" />
	    <result column="contacter" jdbcType="VARCHAR" property="contacter" />
	    <result column="telephone" jdbcType="VARCHAR" property="telephone" />
	    <result column="real_type" jdbcType="VARCHAR" property="realType" />
    </association>
    <association property="source" resultMap="com.banry.pscm.tenant.persist.dao.DynamicSourceMapper.BaseResultMap"></association> 
    <collection property="bizs"  resultMap="com.banry.pscm.tenant.persist.dao.PscmBusinessMapper.BaseResultMap"></collection> 
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 13:50:15 CST 2018.
    -->
    tenant_code, account, password, name, tenant_type, create_date, start_date, end_date, 
    status, parent_code
  </sql>
  <sql id="T_Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 13:50:15 CST 2018.
    -->
    t.tenant_code, t.account, t.password, t.name, t.tenant_type, t.create_date, t.start_date, t.end_date, 
    t.status, t.parent_code
  </sql>
  <sql id="Real_Column_List">
    r.real_code, r.name real_name, r.address, r.post_code, r.contacter, r.telephone, r.real_type,r.biz_license, r.other_scanner
  </sql>
  <sql id="Source_Column_List">
    s.source_code, s.source_name, s.drive_name, s.link_url, s.user_name, s.user_password
  </sql>
  <sql id="Biz_Column_List">
    b.biz_code, b.biz_english_name, b.biz_chinese_name, b.biz_desc
  </sql>
  <select id="findTenantBySelective" parameterType="com.banry.pscm.tenant.service.biz.Tenant" resultMap="BaseResultMap">
  	 select 
    <include refid="Base_Column_List"  />
    from tenant where 
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="tenantCode != null">
        tenant_code = #{tenantCode,jdbcType=VARCHAR}
      </if>
      <if test="tenantType != null">
        tenant_type = #{tenantType,jdbcType=VARCHAR}
      </if>
      <if test="tenantReal != null">
        real_code = #{realCode,jdbcType=VARCHAR}
      </if>
      <if test="source != null">
        source_code = #{sourceCode,jdbcType=VARCHAR}
      </if>
    </trim>
  </select>
  
    <select id="findTenantListBySelective" parameterType="com.banry.pscm.tenant.service.biz.Tenant" resultMap="ResultMapWithBizs">
  	 select 
    <include refid="Base_Column_List"  />
    from tenant where 
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="name != null">
        name = #{name,jdbcType=VARCHAR}
      </if>
      <if test="createDate != null">
        create_date = #{createDate,jdbcType=VARCHAR}
      </if>
      <if test="status != null">
        status = #{status,jdbcType=VARCHAR}
      </if>
      <if test="parentCode != null">
        parent_code = #{parentCode,jdbcType=VARCHAR}
      </if>
    </trim>
  </select>
  
  
  <select id="selectBaseByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 13:50:15 CST 2018.
    -->
    select 
    <include refid="Base_Column_List"  />
    from tenant 
    where tenant_code = #{tenantCode,jdbcType=VARCHAR}
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="ResultMapWithRealSourceAndBizs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 13:50:15 CST 2018.
    -->
    select 
    <include refid="T_Base_Column_List" />,
    <include refid="Real_Column_List" />,
    <include refid="Source_Column_List" />,
    <include refid="Biz_Column_List" />
    from tenant t left join tenant_real r on t.real_code = r.real_code left join dynamic_source s on t.source_code = s.source_code  left join biz_authority tb on t.tenant_code = tb.tenant_code left join business b on tb.biz_code = b.biz_code
    where t.tenant_code = #{tenantCode,jdbcType=VARCHAR}
  </select>
  
  <select id="findTenantByAccount" parameterType="java.lang.String" resultMap="ResultMapWithRealSourceAndBizs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 13:50:15 CST 2018.
    -->
    select 
    <include refid="T_Base_Column_List" />,
    <include refid="Real_Column_List" />,
    <include refid="Source_Column_List" />,
    <include refid="Biz_Column_List" />
    from tenant t left join tenant_real r on t.real_code = r.real_code left join dynamic_source s on t.source_code = s.source_code  left join biz_authority tb on t.tenant_code = tb.tenant_code left join business b on tb.biz_code = b.biz_code
    where t.account = #{account,jdbcType=VARCHAR}
  </select>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 13:50:15 CST 2018.
    -->
    delete from tenant
    where tenant_code = #{tenantCode,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.banry.pscm.tenant.service.biz.Tenant">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 13:50:15 CST 2018.
    -->
    insert into tenant (tenant_code, account, password, 
      name, tenant_type, create_date, 
      start_date, end_date, status, 
      parent_code, real_code, source_code
      )
    values (#{tenantCode,jdbcType=VARCHAR}, #{account,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR}, 
      #{name,jdbcType=VARCHAR}, #{tenantType,jdbcType=INTEGER}, #{createDate,jdbcType=DATE}, 
      #{startDate,jdbcType=DATE}, #{endDate,jdbcType=DATE}, #{status,jdbcType=INTEGER}, 
      #{parentCode,jdbcType=VARCHAR}, #{tenantReal.realCode,jdbcType=VARCHAR}, #{source.sourceCode,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.banry.pscm.tenant.service.biz.Tenant">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 13:50:15 CST 2018.
    -->
    insert into tenant
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="tenantCode != null">
        tenant_code,
      </if>
      <if test="account != null">
        account,
      </if>
      <if test="password != null">
        password,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="tenantType != null">
        tenant_type,
      </if>
      <if test="createDate != null">
        create_date,
      </if>
      <if test="startDate != null">
        start_date,
      </if>
      <if test="endDate != null">
        end_date,
      </if>
      <if test="status != null">
        status,
      </if>
      <if test="parentCode != null">
        parent_code,
      </if>
      <if test="tenantReal != null">
        real_code,
      </if>
      <if test="source != null">
        source_code,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="tenantCode != null">
        #{tenantCode,jdbcType=VARCHAR},
      </if>
      <if test="account != null">
        #{account,jdbcType=VARCHAR},
      </if>
      <if test="password != null">
        #{password,jdbcType=VARCHAR},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="tenantType != null">
        #{tenantType,jdbcType=INTEGER},
      </if>
      <if test="createDate != null">
        #{createDate,jdbcType=DATE},
      </if>
      <if test="startDate != null">
        #{startDate,jdbcType=DATE},
      </if>
      <if test="endDate != null">
        #{endDate,jdbcType=DATE},
      </if>
      <if test="status != null">
        #{status,jdbcType=INTEGER},
      </if>
      <if test="parentCode != null">
        #{parentCode,jdbcType=VARCHAR},
      </if>
      <if test="tenantReal != null">
        #{tenantReal.realCode,jdbcType=VARCHAR},
      </if>
      <if test="source != null">
        #{source.sourceCode,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.banry.pscm.tenant.service.biz.Tenant">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 13:50:15 CST 2018.
    -->
    update tenant
    <set>
      <if test="account != null">
        account = #{account,jdbcType=VARCHAR},
      </if>
      <if test="password != null">
        password = #{password,jdbcType=VARCHAR},
      </if>
      <if test="name != null">
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="tenantType != null">
        tenant_type = #{tenantType,jdbcType=INTEGER},
      </if>
      <if test="createDate != null">
        create_date = #{createDate,jdbcType=DATE},
      </if>
      <if test="startDate != null">
        start_date = #{startDate,jdbcType=DATE},
      </if>
      <if test="endDate != null">
        end_date = #{endDate,jdbcType=DATE},
      </if>
      <if test="status != null">
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="parentCode != null">
        parent_code = #{parentCode,jdbcType=VARCHAR},
      </if>
      <if test="tenantReal != null">
        real_code = #{tenantReal.realCode,jdbcType=VARCHAR},
      </if>
      <if test="source != null">
        source_code = #{source.sourceCode,jdbcType=VARCHAR},
      </if>
    </set>
    where tenant_code = #{tenantCode,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.banry.pscm.tenant.service.biz.Tenant">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 05 13:50:15 CST 2018.
    -->
    update tenant
    set account = #{account,jdbcType=VARCHAR},
      password = #{password,jdbcType=VARCHAR},
      name = #{name,jdbcType=VARCHAR},
      tenant_type = #{tenantType,jdbcType=INTEGER},
      create_date = #{createDate,jdbcType=DATE},
      start_date = #{startDate,jdbcType=DATE},
      end_date = #{endDate,jdbcType=DATE},
      status = #{status,jdbcType=INTEGER},
      parent_code = #{parentCode,jdbcType=VARCHAR},
      <if test="tenantReal != null">
      real_code = #{tenantReal.realCode,jdbcType=VARCHAR},
      </if>
      <if test="tenantReal == null">
      real_code =null,
      </if>
      <if test="source != null">
      source_code = #{source.sourceCode,jdbcType=VARCHAR}
      </if>
      <if test="source == null">
      source_code = null
      </if>
    where tenant_code = #{tenantCode,jdbcType=VARCHAR}
  </update>
</mapper>